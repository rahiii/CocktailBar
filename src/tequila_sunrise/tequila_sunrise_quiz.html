{% extends 'navbar.html' %}

{% block title %}TequilaÂ Sunrise Quiz | CocktailÂ Bar{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
<style>
    .score {
        font-weight: 600;
        margin-bottom: 1rem
    }

    .wrong label {
        color: #c60
    }

    .locked input {
        pointer-events: none
    }
</style>
{% endblock %}

{% block content %}
<h1>TequilaÂ SunriseÂ Quiz</h1>
<p id="scoreLine" class="score"></p>

<form id="quizForm">
    <div class="question">
        <h3>1. What is the base spirit in a TequilaÂ Sunrise?</h3>
        <label><input type="radio" name="q1" value="a">Â Vodka</label>
        <label><input type="radio" name="q1" value="b">Â Tequila</label>
        <label><input type="radio" name="q1" value="c">Â Gin</label>
    </div>

    <div class="question">
        <h3>2. Which fruit juice gives the drink its orange color?</h3>
        <label><input type="radio" name="q2" value="a">Â Pineapple</label>
        <label><input type="radio" name="q2" value="b">Â Orange</label>
        <label><input type="radio" name="q2" value="c">Â Mango</label>
    </div>

    <div class="question">
        <h3>3. What ingredient creates theÂ â€œsunriseâ€ gradient effect?</h3>
        <label><input type="radio" name="q3" value="a">Â Grenadine</label>
        <label><input type="radio" name="q3" value="b">Â Bitters</label>
        <label><input type="radio" name="q3" value="c">Â Campari</label>
    </div>

    <div class="question">
        <h3>4. What is a typical garnish for a TequilaÂ Sunrise?</h3>
        <label><input type="radio" name="q4" value="a">Â Mint sprig</label>
        <label><input type="radio" name="q4" value="b">Â CherryÂ &Â orange slice</label>
        <label><input type="radio" name="q4" value="c">Â Lime wheel</label>
    </div>

    <div class="question">
        <h3>5. In which decade did the TequilaÂ Sunrise become widely popular in the U.S.?</h3>
        <label><input type="radio" name="q5" value="a">Â 1960s</label>
        <label><input type="radio" name="q5" value="b">Â 1970s</label>
        <label><input type="radio" name="q5" value="c">Â 1980s</label>
    </div>

    <button type="submit" class="submit-btn">Submit</button>
</form>
{% endblock %}

{% block extra_js %}
<script>
    const KEY = { q1: 'b', q2: 'b', q3: 'a', q4: 'b', q5: 'b' };
    let tries = 0;
    const form = document.getElementById('quizForm');
    const scoreLine = document.getElementById('scoreLine');
    update(0);

    form.addEventListener('submit', e => {
        e.preventDefault(); tries++;
        let right = 0;
        [...form.querySelectorAll('.question')].forEach(q => {
            const n = q.querySelector('input').name;
            const pick = q.querySelector('input:checked');
            if (pick && pick.value === KEY[n]) { lock(q); right++; } else { wrong(q); }
        });
        update(right);
        if (right === Object.keys(KEY).length) alert('Perfect! ğŸ‰');
    });

    function lock(q) { q.classList.add('locked'); q.querySelectorAll('label').forEach(l => l.style.fontWeight = '700'); }
    function wrong(q) { q.classList.add('wrong'); }
    function update(r) { scoreLine.textContent = `ScoreÂ ${r}/5 â€” AttemptÂ #${tries || 1}`; }
</script>
{% endblock %}