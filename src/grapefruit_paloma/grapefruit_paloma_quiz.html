{% extends 'navbar.html' %}

{% block title %}GrapefruitÂ Paloma Quiz | CocktailÂ Bar{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
<style>
    .score {
        font-weight: 600;
        margin-bottom: 1rem
    }

    .wrong label {
        color: #c60
    }

    .locked input {
        pointer-events: none
    }
</style>
{% endblock %}

{% block content %}
<h1>GrapefruitÂ PalomaÂ Quiz</h1>
<p id="scoreLine" class="score"></p>

<form id="quizForm">
    <div class="question">
        <h3>1. What is the traditional base spirit in aÂ Paloma?</h3>
        <label><input type="radio" name="q1" value="a">Â Tequila</label>
        <label><input type="radio" name="q1" value="b">Â Rum</label>
        <label><input type="radio" name="q1" value="c">Â Mezcal</label>
    </div>

    <div class="question">
        <h3>2. Which of these fruits is the star of aÂ Paloma?</h3>
        <label><input type="radio" name="q2" value="a">Â Orange</label>
        <label><input type="radio" name="q2" value="b">Â Grapefruit</label>
        <label><input type="radio" name="q2" value="c">Â Lime</label>
    </div>

    <div class="question">
        <h3>3. What is the most common mixer used in aÂ Paloma?</h3>
        <label><input type="radio" name="q3" value="a">Â Club soda</label>
        <label><input type="radio" name="q3" value="b">Â Tonic water</label>
        <label><input type="radio" name="q3" value="c">Â Grapefruit soda</label>
    </div>

    <div class="question">
        <h3>4. What type of rim is often used on aÂ Paloma glass?</h3>
        <label><input type="radio" name="q4" value="a">Â Sugar</label>
        <label><input type="radio" name="q4" value="b">Â Chili powder</label>
        <label><input type="radio" name="q4" value="c">Â Salt</label>
    </div>

    <div class="question">
        <h3>5. What glass is typically used for serving aÂ Paloma?</h3>
        <label><input type="radio" name="q5" value="a">Â Coupe</label>
        <label><input type="radio" name="q5" value="b">Â Highball</label>
        <label><input type="radio" name="q5" value="c">Â Martini</label>
    </div>

    <button type="submit" class="submit-btn">Submit</button>
</form>
{% endblock %}

{% block extra_js %}
<script>
    const KEY = { q1: 'a', q2: 'b', q3: 'c', q4: 'c', q5: 'b' };
    let tries = 0;
    const form = document.getElementById('quizForm');
    const scoreLine = document.getElementById('scoreLine');
    update(0);

    form.addEventListener('submit', e => {
        e.preventDefault(); tries++;
        let right = 0;
        [...form.querySelectorAll('.question')].forEach(q => {
            const n = q.querySelector('input').name;
            const pick = q.querySelector('input:checked');
            if (pick && pick.value === KEY[n]) { lock(q); right++; } else { wrong(q); }
        });
        update(right);
        if (right === Object.keys(KEY).length) alert('Perfect! ðŸŽ‰');
    });

    function lock(q) { q.classList.add('locked'); q.querySelectorAll('label').forEach(l => l.style.fontWeight = '700'); }
    function wrong(q) { q.classList.add('wrong'); }
    function update(r) { scoreLine.textContent = `ScoreÂ ${r}/5 â€” AttemptÂ #${tries || 1}`; }
</script>
{% endblock %}