{% extends 'navbar.html' %}

{% block title %}BloodyÂ OrangeÂ Martini Quiz | CocktailÂ Bar{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
<style>
    .score {
        font-weight: 600;
        margin-bottom: 1rem
    }

    .wrong label {
        color: #c60 !important
    }

    .locked input {
        pointer-events: none
    }
</style>
{% endblock %}

{% block content %}



<h1>BloodyÂ OrangeÂ MartiniÂ Quiz</h1>

<p id="scoreLine" class="score"></p>

<form id="quizForm">

    <div class="question">
        <h3>1. What is the base spirit in a Bloody OrangeÂ Martini?</h3>
        <label><input type="radio" name="q1" value="a">Â Vodka</label>
        <label><input type="radio" name="q1" value="b">Â Rum</label>
        <label><input type="radio" name="q1" value="c">Â Gin</label>
    </div>

    <div class="question">
        <h3>2. What citrus fruit gives the drink its name?</h3>
        <label><input type="radio" name="q2" value="a">Â BloodÂ Orange</label>
        <label><input type="radio" name="q2" value="b">Â Grapefruit</label>
        <label><input type="radio" name="q2" value="c">Â Lemon</label>
    </div>

    <div class="question">
        <h3>3. What is a common garnish for this cocktail?</h3>
        <label><input type="radio" name="q3" value="a">Â OrangeÂ peel</label>
        <label><input type="radio" name="q3" value="b">Â BasilÂ leaf</label>
        <label><input type="radio" name="q3" value="c">Â Cherry</label>
    </div>

    <div class="question">
        <h3>4. What kind of glass is usually used?</h3>
        <label><input type="radio" name="q4" value="a">Â Highball</label>
        <label><input type="radio" name="q4" value="b">Â Coupe</label>
        <label><input type="radio" name="q4" value="c">Â Martini</label>
    </div>

    <div class="question">
        <h3>5. Which of these is a typical additional ingredient?</h3>
        <label><input type="radio" name="q5" value="a">Â SimpleÂ syrup</label>
        <label><input type="radio" name="q5" value="b">Â TripleÂ sec</label>
        <label><input type="radio" name="q5" value="c">Â Bitters</label>
    </div>

    <button type="submit" class="submit-btn">Submit</button>
</form>
{% endblock %}

{% block extra_js %}
<script>
    /* correct answers by radio value */
    const KEY = { q1: 'a', q2: 'a', q3: 'a', q4: 'c', q5: 'b' };
    let tries = 0;

    const form = document.getElementById('quizForm');
    const scoreLine = document.getElementById('scoreLine');
    updateScore(0);

    form.addEventListener('submit', e => {
        e.preventDefault(); tries++;
        let right = 0;
        [...form.querySelectorAll('.question')].forEach(q => {
            const name = q.querySelector('input').name;
            const chosen = q.querySelector('input:checked');
            /* no pick â†’ treat as wrong */
            if (!chosen) { markWrong(q); return; }
            if (chosen.value === KEY[name]) {
                lockCorrect(q); right++;
            } else {
                markWrong(q);
            }
        });
        updateScore(right);
        if (right === Object.keys(KEY).length) {
            alert('Perfect! ðŸŽ‰');
        }
    });

    function lockCorrect(q) {
        q.classList.remove('wrong'); q.classList.add('locked');
        q.querySelectorAll('label').forEach(l => l.style.fontWeight = '700');
    }

    function markWrong(q) {
        q.classList.add('wrong');
    }

    function updateScore(r) {
        scoreLine.textContent = `ScoreÂ ${r}/${Object.keys(KEY).length} â€” AttemptÂ #${tries || 1}`;
    }
</script>
{% endblock %}